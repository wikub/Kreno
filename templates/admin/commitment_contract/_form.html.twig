{% form_theme form with ['_form/_form_theme.html.twig', _self] %}

{% import _self as formMacros %}

{% macro printRegularTimeslotRow(regularTimeslot) %}
    <tr data-item>
        <td>{{ form_widget(regularTimeslot.timeslotTemplate) }}</td>
        <td>
            <button type="button" class="btn btn-danger btn-sm" data-entry-action="remove">
                <i class="fas fa-trash-alt"></i>
            </button>
        </td>
    </tr>
{% endmacro %}


{{ form_start(form) }}
    {{ form_row(form.start) }}
    {{ form_row(form.finish) }}
    {{ form_row(form.type) }}

    <div data-container>
        <h3 class="mt-3">Postes réguliers <button type="button" class="add_item_link btn btn-primary btn-sm" data-collection-holder-class="regularTimeslots" data-entry-action="add"><i class="fas fa-plus"></i></button></h3>

        <div class="table-responsive">
            <table class="jobs table table-bordered">
                <thead>
                    <tr>
                        <th>Créneau</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody
                    data-index="{{ form.regularTimeslots|length > 0 ? form.regularTimeslots|last.vars.name + 1 : 0 }}"
                    data-prototype="{{ formMacros.printRegularTimeslotRow(form.regularTimeslots.vars.prototype)|e('html_attr') }}"
                >
                {% for regularTimeslot in form.regularTimeslots %}
                    {{ formMacros.printRegularTimeslotRow(regularTimeslot) }}
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="btn-group float-end mt-3">
        <a href="{{ path('admin_commitment_contract_index', {'user': user.id}) }}" class="btn btn-secondary"><i class="fas fa-list"></i> retour</a>
        <button class="btn btn-primary"><i class="far fa-save"></i> {{ button_label|default('Enregister') }}</button>
    </div>

{{ form_end(form) }}

